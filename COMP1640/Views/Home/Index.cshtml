@using Microsoft.AspNetCore.Mvc.TagHelpers
@model COMP1640.ViewModels.Common.IdeaIndexResponse
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">


<div class="container">
</div>
<section>
	<div class="container">
		<div class="row d-flex justify-content-center align-items-center" title="Header-button">
			<div class="pt-4 col col-xl-10">
				<div class="d-flex justify-content-between align-self-center">
					<div id="addIdeaBtn" class="d-flex mb-4">
						<div class="align-items-center">
							<a class="btn btn-info text-white text-center" asp-controller="Idea" asp-action="Create">
								<i class="material-icons text-white">
									Add Idea
								</i>
							</a>
						</div>
					</div>
					<form asp-controller="Home" asp-action="Index" method="get">
						<div class="col-12 d-flex justify-content-center text-center">
							<div class="">

								Search: <input type="text" name="SearchString" value="@Model.CurrentSearchString" />|
								Filter:
								@if (Model.CurrentCategoryFilter == null)
								{
									<select asp-for="@Model.CurrentCategoryFilter" name="FilterOption" asp-items="@Model.Categories" class="esh-catalog-filter">
										<option value="" selected="selected">
											All
										</option>
									</select>
								}
								else
								{
									<select asp-for="@Model.CurrentCategoryFilter" name="FilterOption" asp-items="@Model.Categories" class="esh-catalog-filter">
										<option value="2">
											2
										</option>
									</select>
								}

								Sort:
								@if (!string.IsNullOrWhiteSpace(Model.CurrentSort))
								{
									@* <select asp-for="@Model.CurrentSort" name="sortOption" asp-items="@Model.Categories" class="esh-catalog-filter"> *@
									<select asp-for="@Model.CurrentSort" asp-items="@Model.SortOptionPicklist" name="sortOption" class="esh-catalog-filter">
										<option value="">
											No sort
										</option>
									</select>
								}
								else
								{
									<select asp-for="@Model.CurrentSort" name="sortOption" asp-items="@Model.SortOptionPicklist" class="esh-catalog-filter">
										<option value="" selected="selected">
											No Sort
										</option>
									</select>
								}
								<button style="margin-bottom:0" type="submit" value="Search" class="btn btn-default">Search</button>
								<a asp-action="Index" asp-controller="Home">Back to Full List</a>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div class="row d-flex justify-content-center align-items-center">
			@foreach (var item in Model.IdeaIndexItems)
			{
				<div class="col col-xl-10" aria-label="Card example">
					<div class="card mb-5" style="border-radius: 15px;">
						<div class="card-body p-4">

							<div class="d-flex align-items-center mb-4">
								<div class="flex-shrink-0">
									<img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-profiles/avatar-2.webp"
									 alt="Generic placeholder image" class="img-fluid rounded-circle border border-dark border-3"
									 style="width: 70px;">
								</div>
								<div class="flex-grow-1 ms-3">
									<div class="d-flex flex-row align-items-center mb-2">
										<div class="flex-shrink-0">
											<span class="mx-10"></span>
											<strong>@item.Author.UserName</strong> @item.CreatedOn
										</div>
									</div>
								</div>
							</div>
							<hr>
							<div class="btn btn-outline-light btn-rounded btn-sm"
							 data-mdb-ripple-color="dark">
								@item.Category
							</div>
							<div class="d-flex justify-content-start align-items-center">
								@item.Content
							</div>
							<hr />
							<div class="small d-flex justify-content-start">
								<a href="#!" class="d-flex align-items-center me-3">
									<i class="far fa-thumbs-up me-2"></i>
									<p class="mb-0">@item.ThumbsUp</p>
								</a>

								<a href="#!" class="d-flex align-items-center me-3">
									<i class="far fa-thumbs-down me-2"></i>
									<p class="mb-0">@item.ThumbsDown</p>
								</a>
								<a href="#!" class="d-flex align-items-center me-3">
									<i class="far fa-comment-dots me-2"></i>
									<p class="mb-0">@item.TotalComment</p>
								</a>
								<a href="#!" class="d-flex align-items-center me-3">
									<i class="far fa-eye me-2"></i>
									<p class="mb-0">@item.Views</p>
								</a>
							</div>
						</div>
					</div>
				</div>
			}
		</div>
		<div class="row" style="margin-top: 50px">
			<div class="col-xs-8 col-xs-offset-2">

				@{
					var prevDisabled = !Model.PaginationInfo.Previous ? "disabled" : "";
					var nextDisabled = !Model.PaginationInfo.Next ? "disabled" : "";
				}
				<nav>
					<ul class="pagination justify-content-center">
						<li class="page-item">
							<a class="page-link btn @prevDisabled"
							   asp-action="Index"
							   asp-route-pageNumber="@(Model.PaginationInfo.ActualPage - 1)"
							   asp-route-sortOption="@Model.CurrentSort"
							   asp-route-CurrentSearch="@Model.CurrentSearchString"
							   asp-route-FilterOption="@Model.CurrentCategoryFilter">
								<span aria-hidden="true">&laquo;</span>
							</a>
						</li>
						<li class="page-item">
							<a class="page-link  @nextDisabled"
							   asp-action="Index"
							   asp-route-pageNumber="@(Model.PaginationInfo.ActualPage + 1)"
							   asp-route-sortOption="@Model.CurrentSort"
							   asp-route-CurrentSearch="@Model.CurrentSearchString"
							   asp-route-FilterOption="@Model.CurrentCategoryFilter">
								<span aria-hidden="true">&raquo;</span>
							</a>
						</li>
					</ul>
				</nav>
				<form asp-action="Index" method="get">
					<div class="col-12 d-flex justify-content-center text-center">
						<div class="">

							Go to page: <input type="text" name="pageNumber" value="" />|
							@Model.PaginationInfo.TotalPages
							<input type="hidden" asp-for="@Model.CurrentSearchString" name="searchString" />
							<input type="hidden" asp-for="@Model.CurrentSort" name="SortOrder" />
							<input type="hidden" asp-for="@Model.CurrentCategoryFilter" name="filterOption" />
							<button style="margin-bottom:0" type="submit" value="Search" class="btn btn-default">Submit</button>
						</div>
					</div>
				</form>
			</div><!-- end col-xs-8 -->
		</div>
	</div>
</section>

